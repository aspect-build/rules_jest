<!-- Generated with Stardoc: http://skydoc.bazel.build -->

# Public API for Jest rules

<a id="jest_test"></a>

## jest_test

<pre>
jest_test(<a href="#jest_test-name">name</a>, <a href="#jest_test-node_modules">node_modules</a>, <a href="#jest_test-config">config</a>, <a href="#jest_test-data">data</a>, <a href="#jest_test-snapshots">snapshots</a>, <a href="#jest_test-run_in_band">run_in_band</a>, <a href="#jest_test-colors">colors</a>,
          <a href="#jest_test-auto_configure_reporters">auto_configure_reporters</a>, <a href="#jest_test-auto_configure_test_sequencer">auto_configure_test_sequencer</a>, <a href="#jest_test-snapshots_ext">snapshots_ext</a>,
          <a href="#jest_test-quiet_snapshot_updates">quiet_snapshot_updates</a>, <a href="#jest_test-timeout">timeout</a>, <a href="#jest_test-size">size</a>, <a href="#jest_test-kwargs">kwargs</a>)
</pre>

jest_test rule

Supports Bazel sharding. See https://docs.bazel.build/versions/main/test-encyclopedia.html#test-sharding.

Supports filtering tests with `--test_filter` flag. The filter is matched against test file paths using Jest's `testRegex` config option. For example: `bazel test --test_filter="user" //my:test`.

Supports updating snapshots with `bazel run {name}_update_snapshots` if `snapshots` are specified.


**PARAMETERS**


| Name  | Description | Default Value |
| :------------- | :------------- | :------------- |
| <a id="jest_test-name"></a>name |  A unique name for this target.   |  none |
| <a id="jest_test-node_modules"></a>node_modules |  Label pointing to the linked node_modules target where jest is linked, e.g. `//:node_modules`. `jest-cli` must be linked into the node_modules supplied. `jest-junit` is also required by default when `auto_configure_reporters` is True.<br><br>NB: Only the required npm packages are included in data from `//:node_modules`. Other npm packages are not included as inputs.   |  none |
| <a id="jest_test-config"></a>config |  "Optional Jest config file. See https://jestjs.io/docs/configuration.<br><br>Supported config file types are ".js", ".cjs", ".mjs", ".json" which come from https://jestjs.io/docs/configuration minus TypeScript since we this rule extends from the configuration. TypeScript jest configs should be transpiled before being passed to jest_test with [rules_ts](https://github.com/aspect-build/rules_ts).   |  `None` |
| <a id="jest_test-data"></a>data |  Runtime dependencies of the Jest test.<br><br>This should include all test files, configuration files & files under test.   |  `[]` |
| <a id="jest_test-snapshots"></a>snapshots |  If True, a `{name}_update_snapshots` binary target is generated that will update all existing `__snapshots__` directories when `bazel run`. This is the equivalent to running `jest -u` or `jest --updateSnapshot` outside of Bazel, except that new `__snapshots__` will not automatically be created on update. To bootstrap a new `__snapshots__` directory, you can create an empty one and then run the `{name}_update_snapshots` target to populate it.<br><br>If the name of the snapshot directory is not the default `__snapshots__` because of a custom snapshot resolver, you can specify customize the snapshot directories with a `glob` or a static list. For example,<br><br><pre><code>jest_test(&#10;    name = "test",&#10;    node_modules = "//:node_modules",&#10;    config = "jest.config.js",&#10;    data = [&#10;        "greetings/greetings.js",&#10;        "greetings/greetings.test.js",&#10;        "link/link.js",&#10;        "link/link.test.js",&#10;    ],&#10;    snapshots = glob(["**/__snaps__"], exclude_directories = 0),&#10;)</code></pre><br><br>or with a static list,<br><br><pre><code>    snapshots = [&#10;        "greetings/__greetings_snaps__",&#10;        "link/__link_snaps__",&#10;    ]</code></pre><br><br>Snapshots directories must not contain any files except for snapshots. There must also be no BUILD files in the snapshots directories since they must be part of the same Bazel package that the `jest_test` target is in.<br><br>If snapshots are _not_ configured to output to a directory that contains only snapshots, you may alternately set `snapshots` to a list of snapshot files expected to be generated by this `jest_test` target. These must be source files and all snapshots that are generated must be explicitly listed. You may use a `glob` such as `glob(["**/*.snap"])` to generate this list, in which case all snapshots must already be on disk so they are discovered by `glob`.   |  `False` |
| <a id="jest_test-run_in_band"></a>run_in_band |  When True, the `--runInBand` argument is passed to the Jest CLI so that all tests are run serially in the current process, rather than creating a worker pool of child processes that run tests. See https://jestjs.io/docs/cli#--runinband for more info.<br><br>This is the desired default behavior under Bazel since Bazel expect each test process to use up one CPU core. To parallelize a single jest_test across many cores, use `shard_count` instead which is supported by `jest_test`. See https://docs.bazel.build/versions/main/test-encyclopedia.html#test-sharding.   |  `True` |
| <a id="jest_test-colors"></a>colors |  When True, the `--colors` argument is passed to the Jest CLI. See https://jestjs.io/docs/cli#--colors.   |  `True` |
| <a id="jest_test-auto_configure_reporters"></a>auto_configure_reporters |  Let jest_test configure reporters for Bazel test and xml test logs.<br><br>When enabled, `jest-junit` must be linked to the supplied node_modules tree.<br><br>The `default` reporter is used for the standard test log and `jest-junit` is used for the xml log. These reporters are appended to the list of reporters from the user Jest `config` only if they are not already set.<br><br>The `JEST_JUNIT_OUTPUT_FILE` environment variable is always set to where Bazel expects a test runner to write its xml test log so that if `jest-junit` is configured in the user Jest `config` it will output the junit xml file where Bazel expects by default.   |  `True` |
| <a id="jest_test-auto_configure_test_sequencer"></a>auto_configure_test_sequencer |  Let jest_test configure a custom test sequencer for Bazel test that support Bazel sharding.<br><br>Any custom testSequencer value in a user Jest `config` will be overridden.<br><br>See https://jestjs.io/docs/configuration#testsequencer-string for more information on Jest testSequencer config option.   |  `True` |
| <a id="jest_test-snapshots_ext"></a>snapshots_ext |  The expected extensions for snapshot files. Defaults to `.snap`, the Jest default.   |  `".snap"` |
| <a id="jest_test-quiet_snapshot_updates"></a>quiet_snapshot_updates |  When True, snapshot update stdout & stderr is hidden when the snapshot update is successful.<br><br>On a snapshot update failure, its stdout & stderr will always be shown.   |  `False` |
| <a id="jest_test-timeout"></a>timeout |  standard attribute for tests. Defaults to "short" if both timeout and size are unspecified.   |  `None` |
| <a id="jest_test-size"></a>size |  standard attribute for tests   |  `None` |
| <a id="jest_test-kwargs"></a>kwargs |  Additional named parameters passed to both `js_test` and `js_binary`. See https://github.com/aspect-build/rules_js/blob/main/docs/js_binary.md   |  none |



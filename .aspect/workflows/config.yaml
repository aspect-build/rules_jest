# See https://docs.aspect.build/v/workflows/config
---
tasks:
  - format:
      queue: aspect-small
  - buildifier:
      queue: aspect-small
  - gazelle:
      queue: aspect-small
  - configure:
      queue: aspect-small
  - test:
      coverage: true
      upload_test_logs: executed
  - delivery:
      auto_deliver: true
      rules:
        - deliverable: 'attr("tags", "\bdeliverable\b", //...)'
          condition:
            branches:
              - main
        - deliverable:
            - //docs:docs_delivery
          condition:
            only_on_change: false
            branches:
              - main
  - finalization:
      queue: aspect-small
notifications:
  github: {}
